<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Badge</title>
  <style>
    /* ===== Physical label size (LANDSCAPE 3.5" x 1.1") ===== */
    :root{
      --w: 3.5in;            /* width  */
      --h: 1.1in;            /* height */
      --px: .08in;           /* horizontal padding */
      --py: .06in;           /* vertical padding  */
      --gap: .06in;          /* space between logo/text */
    }
    @page { size: var(--w) var(--h); margin: 0; }

    /* Screen preview */
    html, body { height: 100%; }
    body{
      margin: 0;
      background: #eaeef7;
      display: flex; align-items: center; justify-content: center;
      font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: #111;
    }

    /* Badge canvas */
    .badge{
      width: var(--w); height: var(--h);
      background: #fff;
      border: 1px solid #ddd; border-radius: .06in;
      box-shadow: 0 10px 28px rgba(0,0,0,.18);
      padding: var(--py) var(--px);
      display: flex; flex-direction: row; align-items: center; justify-content: flex-start;
      gap: var(--gap);
      overflow: hidden;
    }

    /* Left: logo block (optional; remove if you don't use a logo) */
    .logo-wrap{
      width: .68in; height: 100%;
      display: flex; align-items: center; justify-content: center;
      flex: 0 0 .68in;
    }
    .logo{
      max-width: .64in; max-height: .9in; object-fit: contain;
    }

    /* Right: stacked text */
    .text{
      display: flex; flex-direction: column; justify-content: center;
      line-height: 1.05;
      min-width: 0;  /* allow wrapping */
      flex: 1 1 auto;
    }

    .event{           /* tiny event title */
      font-weight: 800;
      font-size: .12in;
      letter-spacing: .2px;
      margin: 0 0 .02in 0;
      white-space: nowrap;
    }

    .ccode-label{
      font-size: .10in; color: #666; margin: 0;
    }
    .ccode{
      font-size: .13in; font-weight: 700; margin: 0 0 .02in 0;
      white-space: nowrap;
    }

    .cname{
      font-size: .16in; font-weight: 800; margin: 0;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }

    .aname{
      font-size: .22in; font-weight: 900; margin: .01in 0 0 0;
      overflow: hidden; text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Auto-tighten long names */
    .tight  { font-size: .20in; }
    .tighter{ font-size: .18in; }

    /* Print cleanup */
    @media print {
      html, body { background: transparent; }
      .badge { box-shadow: none; border: 0; }
      .no-print { display: none !important; }
    }
  </style>
</head>
<body>
  <div class="badge">
    <div class="logo-wrap">
      <img class="logo" src="/static/logo.png" alt="Logo" />
    </div>

    <div class="text">
      <div class="event">Food Show 2025</div>

      {% if customer_code %}
        <div class="ccode-label">Customer Code</div>
        <div class="ccode">{{ customer_code }}</div>
      {% endif %}

      <div class="cname">{{ customer_name }}</div>
      <div id="aname" class="aname">{{ attendee_name }}</div>
    </div>
  </div>

  <script>
    // Slightly shrink attendee font if too long for 3.5" width
    (function () {
      const el = document.getElementById('aname');
      const len = (el.textContent || '').trim().length;
      if (len > 18 && len <= 24) el.classList.add('tight');
      else if (len > 24) el.classList.add('tighter');
    })();

    // Auto-print and close the window (works with your flow)
    window.onload = () => setTimeout(() => window.print(), 150);
    window.onafterprint = () => window.close();
  </script>

  <!-- Manual print button (hidden on print) -->
  <a class="no-print" href="javascript:window.print()">Print</a>
</body>
</html>

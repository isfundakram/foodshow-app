<!DOCTYPE html>
<html>
<head>
  <title>Walk-In Registration</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    select, input { display: block; margin: 10px; padding: 8px; width: 300px; }
    button { padding: 10px 20px; margin-top: 20px; }
  </style>
</head>
<body>
  <script>
    if (localStorage.getItem("authenticated") !== "true") {
      window.location.href = "/static/login.html";
    }
  </script>

  <h2>Walk-In Registration</h2>
  <form id="walkinForm">
    <select name="type">
      <option value="Customer">Customer</option>
      <option value="Vendor">Vendor</option>
      <option value="Family/Friend">Family/Friend</option>
    </select>
    <input name="Customer Code" placeholder="Customer Acct # (optional)" />
    <input name="Customer Name" placeholder="Company Name" required />
    <input name="Attendee Name" placeholder="Attendee Full Name" required />
    <input name="Email" placeholder="Email" required />
    <input name="Phone" placeholder="Phone #" required />
    <button type="submit">Submit Walk-In</button>
  </form>
  <button onclick="logout()">Logout</button>

  <script>
    document.getElementById('walkinForm').onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      const res = await fetch('/walkin', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
      if (res.ok) alert("Walk-in submitted and sent to booth!");
    };

    function logout() {
      localStorage.removeItem("authenticated");
      window.location.href = "/static/login.html";
    }
  </script>
</body>
</html>
